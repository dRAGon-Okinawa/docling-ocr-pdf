# Reference: https://cog.run/yaml
build:
  # This model requires a GPU
  gpu: true

  # a list of ubuntu apt packages to install
  # system_packages:
  #   - "libgl1-mesa-glx"
  #   - "libglib2.0-0"

  # Python version
  python_version: "3.12"

  # Python requirements
  python_requirements: requirements.txt

  # Commands run after the environment is setup
  run:
    - mkdir -p /opt/docling/output
    - |
      [ -z "$(ls -A /opt/docling/models 2>/dev/null)" ] && mkdir -p /opt/docling/models && docling-tools models download --output-dir /opt/docling/models || echo "Directory is not empty. Skipping models download."

# predict.py defines how predictions are run on model
predict: "predict.py:Predictor"
